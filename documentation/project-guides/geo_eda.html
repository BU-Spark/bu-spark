<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Getting Started With Geographical Exploratory Data Analysis - BU Spark Tech Resources</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Getting Started With Geographical Exploratory Data Analysis | BU Spark Tech Resources</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Getting Started With Geographical Exploratory Data Analysis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Boston University Spark! Technical Information Website" /> <meta property="og:description" content="Boston University Spark! Technical Information Website" /> <link rel="canonical" href="https://bu-spark.github.io/documentation/project-guides/geo_eda.html" /> <meta property="og:url" content="https://bu-spark.github.io/documentation/project-guides/geo_eda.html" /> <meta property="og:site_name" content="BU Spark Tech Resources" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Getting Started With Geographical Exploratory Data Analysis" /> <script type="application/ld+json"> {"description":"Boston University Spark! Technical Information Website","@type":"WebPage","url":"https://bu-spark.github.io/documentation/project-guides/geo_eda.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://bu-spark.github.io/assets/spark-logo-round.png"}},"headline":"Getting Started With Geographical Exploratory Data Analysis","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://bu-spark.github.io/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://bu-spark.github.io/" class="nav-list-link">Home</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://bu-spark.github.io/docs/project-guides/" class="nav-list-link">Data Science Project Documentation Guidelines</a><ul class="nav-list "><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-guides/project-structure.html" class="nav-list-link">Project Workflow Guide</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-guides/project-document-template.html" class="nav-list-link">Project Outline Template</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-guides/eda_final.html" class="nav-list-link">Exploratory Data Analysis (EDA)</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-guides/eda_example.html" class="nav-list-link">Getting Started With Exploratory Data Analysis (EDA)</a></li><li class="nav-list-item active"><a href="https://bu-spark.github.io/documentation/project-guides/geo_eda.html" class="nav-list-link active">Getting Started With Geographical Exploratory Data Analysis</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-guides/census_tutorial.html" class="nav-list-link">Making Sense of the Census</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-guides/presentation_principles.html" class="nav-list-link">How to Present Data Science Findings to Clients -- 3 Principles and a Case Study</a></li></ul></li><li class="nav-list-item"><a href="https://bu-spark.github.io/documentation/compute-resources/request-resources.html" class="nav-list-link">Requesting Compute Resources</a></li><li class="nav-list-item"><a href="https://bu-spark.github.io/docs/github-admin/" class="nav-list-link">Github Administration</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://bu-spark.github.io/docs/project-organization/" class="nav-list-link">Spark! Project Organization</a><ul class="nav-list "><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/project-organization/slack.html" class="nav-list-link">Slack</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://bu-spark.github.io/docs/tech-stack/" class="nav-list-link">Spark! Tech Stack</a><ul class="nav-list "><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/tech-stack/software-engineering.html" class="nav-list-link">Software Engineering Tech Stack</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/tech-stack/ui-ux.html" class="nav-list-link">UI/UX Tech Stack</a></li><li class="nav-list-item "><a href="https://bu-spark.github.io/documentation/tech-stack/data-science.html" class="nav-list-link">Data Science Tech Stack</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search BU Spark Tech Resources" aria-label="Search BU Spark Tech Resources" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/BU-Spark/bu-spark.github.io" class="site-button" > BU Spark Tech Resources on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://bu-spark.github.io/docs/project-guides/">Data Science Project Documentation Guidelines</a></li> <li class="breadcrumb-nav-list-item"><span>Getting Started With Geographical Exploratory Data Analysis</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="getting-started-with-geopandas"> <a href="#getting-started-with-geopandas" class="anchor-heading" aria-labelledby="getting-started-with-geopandas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting Started With GeoPandas </h1> <p>This notebook serves as a starter guide or template for doing geographical analysis using the GeoPandas library.</p> <p>The dataset we will be using in this tutorial is from Analyze Boston. Analyze Boston is the City of Boston’s data hub and is a great resource for data sets regarding the city.</p> <p>We will be working with two datasets. First is the 2020 CENSUS TRACTS IN BOSTON dataset, and second is the WICKED FREE WIFI LOCATIONS dataset. The first dataset contains the geographical boundaries of each census tract in Boston, and the second dataset contains the geographical location of each free wifi location in Boston.</p> <p><a href="https://data.boston.gov/dataset/2020-census-tracts-in-boston1/resource/0eb72f57-7226-4552-b8e1-a76b6b142bc3">Census Tracts in Boston</a></p> <p><a href="https://data.boston.gov/dataset/wicked-free-wifi-locations">Wicked Free Wifi Locations</a></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Start by importing the necessary packages
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="n">gpd</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Polygon</span>

<span class="c1"># for visualizations : 
</span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div> <p>When working with geographical data, .shp files are the most common format, however these files are often accompanied by other files with the same name but different extensions. For example, a .shp file might come with a .dbf, .prj, .shx, and .cpg file. These are necessary files and are used in the background. GeoPandas (and other GIS software) typically expect these files to be in the same directory as the .shp file and to share the same base filename.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># read in the census data
</span><span class="n">census</span> <span class="o">=</span> <span class="n">gpd</span><span class="p">.</span><span class="n">read_file</span><span class="p">(</span><span class="s">'census/Census2020_BlockGroups.shp'</span><span class="p">)</span>
<span class="n">census</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <div class="table-wrapper"><table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>OBJECTID</th> <th>STATEFP20</th> <th>COUNTYFP20</th> <th>TRACTCE20</th> <th>BLKGRPCE20</th> <th>GEOID20</th> <th>NAMELSAD20</th> <th>MTFCC20</th> <th>FUNCSTAT20</th> <th>ALAND20</th> <th>AWATER20</th> <th>INTPTLAT20</th> <th>INTPTLON20</th> <th>Shape_STAr</th> <th>Shape_STLe</th> <th>geometry</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>1</td> <td>25</td> <td>025</td> <td>040600</td> <td>1</td> <td>250250406001</td> <td>Block Group 1</td> <td>G5030</td> <td>S</td> <td>1265377.0</td> <td>413598.0</td> <td>+42.3833695</td> <td>-071.0707743</td> <td>1.807118e+07</td> <td>29256.866068</td> <td>POLYGON ((769378.692 2964626.314, 769385.078 2...</td> </tr> <tr> <th>1</th> <td>2</td> <td>25</td> <td>025</td> <td>051101</td> <td>1</td> <td>250250511011</td> <td>Block Group 1</td> <td>G5030</td> <td>S</td> <td>220626.0</td> <td>0.0</td> <td>+42.3882285</td> <td>-071.0046816</td> <td>2.374654e+06</td> <td>9142.174252</td> <td>POLYGON ((788317.786 2966115.262, 788838.563 2...</td> </tr> <tr> <th>2</th> <td>3</td> <td>25</td> <td>025</td> <td>051101</td> <td>4</td> <td>250250511014</td> <td>Block Group 4</td> <td>G5030</td> <td>S</td> <td>227071.0</td> <td>270.0</td> <td>+42.3913407</td> <td>-071.0020343</td> <td>2.446949e+06</td> <td>11579.546171</td> <td>POLYGON ((789538.125 2967889.427, 789539.214 2...</td> </tr> <tr> <th>3</th> <td>4</td> <td>25</td> <td>025</td> <td>981600</td> <td>1</td> <td>250259816001</td> <td>Block Group 1</td> <td>G5030</td> <td>S</td> <td>586981.0</td> <td>158777.0</td> <td>+42.3886205</td> <td>-070.9934424</td> <td>8.026752e+06</td> <td>16626.718823</td> <td>POLYGON ((790938.417 2966482.118, 790974.619 2...</td> </tr> <tr> <th>4</th> <td>5</td> <td>25</td> <td>025</td> <td>010204</td> <td>3</td> <td>250250102043</td> <td>Block Group 3</td> <td>G5030</td> <td>S</td> <td>145888.0</td> <td>0.0</td> <td>+42.3459611</td> <td>-071.1020344</td> <td>1.570220e+06</td> <td>5510.560013</td> <td>POLYGON ((762928.668 2951612.031, 763063.607 2...</td> </tr> </tbody> </table></div> </div> <p>What makes a .shp file unique is the “geometry” column. The geometry column typically contains the coordinates or geometric properties of the features represented in the shapefile, such as points, lines, or polygons. For us, each row in our shapefile represents one census block group, and the geometry column stores a vectorized polygon boundaries of each block group that lets us see a visual representation of the block group.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census</span><span class="p">[</span><span class="s">'geometry'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_6_0.svg" alt="svg" /></p> <p>We can plot all of these block groups together to get a visual representation of the city of Boston.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Boston Census Block Groups'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_8_0.png" alt="png" /></p> <p>Now let’s read in our Wicked Free Wifi Locations shapefile</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># read in the wifi locations shapefile
</span><span class="n">wfw</span> <span class="o">=</span> <span class="n">gpd</span><span class="p">.</span><span class="n">read_file</span><span class="p">(</span><span class="s">'wifi/Wicked_Free_WiFi_Locations.shp'</span><span class="p">)</span>
<span class="n">wfw</span>
</code></pre></div></div> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <div class="table-wrapper"><table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>neighborho</th> <th>neighbor_1</th> <th>device_ser</th> <th>device_con</th> <th>device_add</th> <th>device_lat</th> <th>device_lon</th> <th>device_tag</th> <th>etl_update</th> <th>is_current</th> <th>org1</th> <th>org2</th> <th>inside_out</th> <th>landmark</th> <th>ObjectId</th> <th>geometry</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>N_568579452955534204</td> <td>Dorchester</td> <td>Q2CK-H48M-P2E9</td> <td>DOT-BFD21-AP3</td> <td>641 Columbia Rd., Dorchester, MA</td> <td>42.318336</td> <td>-71.063236</td> <td>BFD Engine-21 Outside</td> <td>2023-06-12</td> <td>1</td> <td>BFD</td> <td>NaN</td> <td>Outside</td> <td>Engine 21</td> <td>1</td> <td>POINT (-7910723.209 5208784.596)</td> </tr> <tr> <th>1</th> <td>N_568579452955537848</td> <td>South Boston</td> <td>Q2CK-LEG8-FAFN</td> <td>SB-HIGHSCHOOL-AP2</td> <td>95 G St., South Boston, MA</td> <td>42.332869</td> <td>-71.044891</td> <td>recently-added</td> <td>2023-06-12</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>2</td> <td>POINT (-7908681.044 5210972.710)</td> </tr> <tr> <th>2</th> <td>N_568579452955538316</td> <td>Hyde Park</td> <td>Q2CK-NERF-4JX7</td> <td>HP-BPDE18-AP2</td> <td>1249 Hyde Park Ave., Hyde Park, MA</td> <td>42.256473</td> <td>-71.124219</td> <td>recently-added</td> <td>2023-06-12</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>3</td> <td>POINT (-7917511.803 5199475.676)</td> </tr> <tr> <th>3</th> <td>N_579275502070532581</td> <td>Roxbury</td> <td>Q2CK-DSFT-7HTL</td> <td>ROX-TROTTER-AP3</td> <td>Humbolt &amp; Waumbeck St., Roxbury, MA</td> <td>42.313249</td> <td>-71.089180</td> <td>BPS Outside Trotter-School</td> <td>2023-06-12</td> <td>1</td> <td>BPS</td> <td>NaN</td> <td>Outside</td> <td>Trotter School</td> <td>4</td> <td>POINT (-7913611.287 5208018.690)</td> </tr> <tr> <th>4</th> <td>N_579275502070532581</td> <td>Roxbury</td> <td>Q2CK-2D9P-VKGR</td> <td>ROX-BFDE42-AP1</td> <td>1870 Columbus Ave., Roxbury, MA</td> <td>42.318412</td> <td>-71.097758</td> <td>BFD Engine-42 Outside</td> <td>2023-06-12</td> <td>1</td> <td>BFD</td> <td>NaN</td> <td>Outside</td> <td>Engine 42</td> <td>5</td> <td>POINT (-7914566.172 5208795.947)</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>255</th> <td>N_568579452955534204</td> <td>Dorchester</td> <td>Q2CK-G9M2-VTK4</td> <td>DOT-BFD21-AP2</td> <td>641 Columbia Rd., Dorchester, MA</td> <td>42.318336</td> <td>-71.063236</td> <td>BFD Engine-21 Outside</td> <td>2023-06-12</td> <td>1</td> <td>BFD</td> <td>NaN</td> <td>Outside</td> <td>Engine 21</td> <td>256</td> <td>POINT (-7910723.209 5208784.596)</td> </tr> <tr> <th>256</th> <td>N_568579452955527921</td> <td>Parks</td> <td>Q2CK-MP93-YDN3</td> <td>PARKS-COMMONEAST-AP1</td> <td>139 Tremont St, Boston, MA 02111</td> <td>42.355436</td> <td>-71.063827</td> <td>Boston-Common</td> <td>2023-06-12</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>Boston Common</td> <td>257</td> <td>POINT (-7910789.066 5214371.556)</td> </tr> <tr> <th>257</th> <td>L_601230550253962688</td> <td>Navy Yard</td> <td>Q2EK-HAXQ-8XW4</td> <td>NavyYard-AP2</td> <td>Navy yard Cambridge</td> <td>42.373720</td> <td>-71.053272</td> <td>NaN</td> <td>2023-06-12</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>258</td> <td>POINT (-7909614.112 5217126.360)</td> </tr> <tr> <th>258</th> <td>N_568579452955534204</td> <td>Dorchester</td> <td>Q2CK-NJQU-RB55</td> <td>DOT-MATHER-AP3</td> <td>24 Parrish St, Dorchester</td> <td>42.308397</td> <td>-71.061017</td> <td>recently-added</td> <td>2023-06-12</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>259</td> <td>POINT (-7910476.256 5207288.280)</td> </tr> <tr> <th>259</th> <td>N_579275502070532581</td> <td>Roxbury</td> <td>Q2CK-NEZE-VRYJ</td> <td>ROX-VINE-AP3</td> <td>339 Dudley St, Roxbury</td> <td>42.326811</td> <td>-71.076707</td> <td>recently-added</td> <td>2023-06-12</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>260</td> <td>POINT (-7912222.881 5210060.516)</td> </tr> </tbody> </table></div> <p>260 rows × 16 columns</p> </div> <p>This time, our geometry column are single POINTs rather than whole POLYGONs, which makes sense because each row represents a single wifi location. After plotting them all together we see just a bunch of dots, which is not very helpful. We can make this plot more useful by adding the census block groups to the plot as well.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wfw</span><span class="p">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Wifi Locations'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_12_0.png" alt="png" /></p> <h2 id="data-cleaning"> <a href="#data-cleaning" class="anchor-heading" aria-labelledby="data-cleaning"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Cleaning </h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">census</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">wfw</span><span class="p">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(581, 16)
(260, 16)
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
RangeIndex: 581 entries, 0 to 580
Data columns (total 16 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   OBJECTID    581 non-null    int64   
 1   STATEFP20   581 non-null    object  
 2   COUNTYFP20  581 non-null    object  
 3   TRACTCE20   581 non-null    object  
 4   BLKGRPCE20  581 non-null    object  
 5   GEOID20     581 non-null    object  
 6   NAMELSAD20  581 non-null    object  
 7   MTFCC20     581 non-null    object  
 8   FUNCSTAT20  581 non-null    object  
 9   ALAND20     581 non-null    float64 
 10  AWATER20    581 non-null    float64 
 11  INTPTLAT20  581 non-null    object  
 12  INTPTLON20  581 non-null    object  
 13  Shape_STAr  581 non-null    float64 
 14  Shape_STLe  581 non-null    float64 
 15  geometry    581 non-null    geometry
dtypes: float64(4), geometry(1), int64(1), object(10)
memory usage: 72.8+ KB
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wfw</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
RangeIndex: 260 entries, 0 to 259
Data columns (total 16 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   neighborho  260 non-null    object  
 1   neighbor_1  260 non-null    object  
 2   device_ser  260 non-null    object  
 3   device_con  250 non-null    object  
 4   device_add  245 non-null    object  
 5   device_lat  248 non-null    float64 
 6   device_lon  248 non-null    float64 
 7   device_tag  215 non-null    object  
 8   etl_update  260 non-null    object  
 9   is_current  260 non-null    int64   
 10  org1        119 non-null    object  
 11  org2        5 non-null      object  
 12  inside_out  162 non-null    object  
 13  landmark    168 non-null    object  
 14  ObjectId    260 non-null    int64   
 15  geometry    248 non-null    geometry
dtypes: float64(2), geometry(1), int64(2), object(11)
memory usage: 32.6+ KB
</code></pre></div></div> <p>Doesn’t look like there’s much to clean in the census data, but in the wifi dataset let’s just drop the organization columns because they contain the most nulls, and we don’t need them for our analysis.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wfw</span><span class="p">.</span><span class="n">drop</span><span class="p">([</span><span class="s">'org1'</span><span class="p">,</span> <span class="s">'org2'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div> <h2 id="showing-the-wifi-locations-on-our-census-block-group-map"> <a href="#showing-the-wifi-locations-on-our-census-block-group-map" class="anchor-heading" aria-labelledby="showing-the-wifi-locations-on-our-census-block-group-map"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Showing the wifi locations on our census block group map </h2> <p>So we can see a map of Boston and a map of dots representing wifi locations separately, but how do I overlay these dots on top of the map of Boston to actuall see where in Boston these wifi locations are? First, check that the Coordinate Reference Systems (CRS) of both geodataframes are the same. The CRS specifies the coordinate system and reference frame used to define the spatial positions of the features represented in the file, and in order to overlay two geodataframes, they must have the same CRS.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Check the CRS of both GeoDataFrames
</span><span class="k">print</span><span class="p">(</span><span class="s">"Census CRS: "</span><span class="p">,</span> <span class="n">census</span><span class="p">.</span><span class="n">crs</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Wifi CRS: "</span><span class="p">,</span> <span class="n">wfw</span><span class="p">.</span><span class="n">crs</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Census CRS:  PROJCS["NAD83 / Massachusetts Mainland (ftUS)",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0],UNIT["Degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["latitude_of_origin",41],PARAMETER["central_meridian",-71.5],PARAMETER["standard_parallel_1",41.7166666666667],PARAMETER["standard_parallel_2",42.6833333333333],PARAMETER["false_easting",656166.666666667],PARAMETER["false_northing",2460625],UNIT["US survey foot",0.304800609601219,AUTHORITY["EPSG","9003"]],AXIS["Easting",EAST],AXIS["Northing",NORTH]]
Wifi CRS:  EPSG:3857
</code></pre></div></div> <p>Since they’re different, we need to use the to_crs method to make sure they’re all in the same coordinate system. We’ll use the EPSG:4326 coordinate system, which is one of the most common coordinate systems for geographical data. Then, we can overlay the two plots using matplotlib.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># If they're different, reproject the wifi data to match the census data
</span><span class="k">if</span> <span class="n">census</span><span class="p">.</span><span class="n">crs</span> <span class="o">!=</span> <span class="n">wfw</span><span class="p">.</span><span class="n">crs</span><span class="p">:</span>
    <span class="n">census</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">wfw</span><span class="p">.</span><span class="n">crs</span><span class="p">)</span>

<span class="c1"># Create a new figure and axis
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Plot the census data
</span><span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">)</span>

<span class="c1"># Plot the wifi locations
</span><span class="n">wfw</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Boston Census Block Groups and Wifi Locations"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_23_0.png" alt="png" /></p> <p>If you want to zoom in on a specific area of a map in GeoPandas, you need to add the lines: plt.xlim() and plt.ylim(). These functions take in the xmin and xmax, and ymin and ymax values of the area you want to zoom in on. You can find these values by looking at the x and y axes of the original plot.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Same as before
</span><span class="k">if</span> <span class="n">census</span><span class="p">.</span><span class="n">crs</span> <span class="o">!=</span> <span class="n">wfw</span><span class="p">.</span><span class="n">crs</span><span class="p">:</span>
    <span class="n">census</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">wfw</span><span class="p">.</span><span class="n">crs</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">)</span>
<span class="n">wfw</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Zoomed in Boston Census Block Groups and Wifi Locations"</span><span class="p">)</span>


<span class="c1"># Set the x and y limits to zoom in on Boston
</span><span class="n">plt</span><span class="p">.</span><span class="n">xlim</span><span class="p">([</span><span class="o">-</span><span class="mf">7.915e6</span><span class="p">,</span> <span class="o">-</span><span class="mf">7.91e6</span><span class="p">])</span>  <span class="c1"># xmin and xmax
</span><span class="n">plt</span><span class="p">.</span><span class="n">ylim</span><span class="p">([</span><span class="mf">5.2075e6</span><span class="p">,</span> <span class="mf">5.2125e6</span><span class="p">])</span>  <span class="c1"># ymin and ymax
</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_25_0.png" alt="png" /></p> <h2 id="make-a-choropleth-color-each-census-block-according-to-the-number-of-wifi-locations-in-it"> <a href="#make-a-choropleth-color-each-census-block-according-to-the-number-of-wifi-locations-in-it" class="anchor-heading" aria-labelledby="make-a-choropleth-color-each-census-block-according-to-the-number-of-wifi-locations-in-it"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Make a Choropleth (color each census block according to the number of WiFi locations in it): </h2> <p>Now that both of our GeoDataFrames are on the same CRS, we can do a spatial join to find out how many WiFi locations are in each census tract. A spatial join is a type of join that merges two GeoDataFrames based on the spatial relationship between the geometries of the two GeoDataFrames. In this case, we want to know how many WiFi locations are in each census tract, so we will use the contains operation to find all of the WiFi locations that are within each census tract.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Perform a spatial join between the census tracts and WiFi locations
</span><span class="n">wifi_per_tract</span> <span class="o">=</span> <span class="n">gpd</span><span class="p">.</span><span class="n">sjoin</span><span class="p">(</span><span class="n">census</span><span class="p">,</span> <span class="n">wfw</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="s">'contains'</span><span class="p">).</span><span class="n">groupby</span><span class="p">(</span><span class="s">'TRACTCE20'</span><span class="p">).</span><span class="n">size</span><span class="p">()</span>
<span class="n">wifi_per_tract</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TRACTCE20
000301     1
000603     3
000604     1
000805     1
030302    35
dtype: int64
</code></pre></div></div> <p>The “contains” operation (as well as other spatial operations like “intersects”, “within”, etc.) uses geometric calculations based on the shapes’ coordinates (which have the same CRS) to determine spatial relationships.</p> <p>For the “contains” operation specifically, it checks if all points of the other geometric object are within the current geometric object, and that their boundaries do not coincide.</p> <p>For example:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Polygon</span>

<span class="c1"># Create a 5x5 square (tract)
</span><span class="n">polygon</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>

<span class="c1"># Create two points (WiFi location)
</span><span class="n">point1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># Inside the polygon
</span><span class="n">point2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1"># Outside the polygon
</span>
<span class="c1"># Check containment
</span><span class="k">print</span><span class="p">(</span><span class="n">polygon</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">point1</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">polygon</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">point2</span><span class="p">))</span>  

</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>True
False
</code></pre></div></div> <p>We can now groupby the unique ‘TRACTCE20’ values and take .size() to get the number of wifi locations in each tract. Then, we can merge this with our census dataframe to get a new column with the number of wifi locations in each census tract.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Add a new column to the census GeoDataFrame with the count of WiFi locations per tract
</span><span class="n">census</span> <span class="o">=</span> <span class="n">census</span><span class="p">.</span><span class="n">merge</span><span class="p">(</span><span class="n">wifi_per_tract</span><span class="p">.</span><span class="n">rename</span><span class="p">(</span><span class="s">'wifi_count'</span><span class="p">),</span> <span class="n">how</span><span class="o">=</span><span class="s">'left'</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">'TRACTCE20'</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Replace NaN values (tracts without any WiFi location) with 0
</span><span class="n">census</span><span class="p">[</span><span class="s">'wifi_count'</span><span class="p">].</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Now, create a new figure and axis
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Plot the census data, color-coded by the number of WiFi locations
</span><span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s">'wifi_count'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">'cividis'</span><span class="p">,</span> 
            <span class="n">legend_kwds</span><span class="o">=</span><span class="p">{</span><span class="s">'label'</span><span class="p">:</span> <span class="s">"Number of WiFi Locations per Tract"</span><span class="p">,</span>
                         <span class="s">'orientation'</span><span class="p">:</span> <span class="s">"horizontal"</span><span class="p">})</span>

<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Number of WiFi Locations per Tract"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_31_0.png" alt="png" /></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">census</span><span class="p">[</span><span class="n">census</span><span class="p">[</span><span class="s">'wifi_count'</span><span class="p">]</span> <span class="o">==</span> <span class="n">census</span><span class="p">[</span><span class="s">'wifi_count'</span><span class="p">].</span><span class="nb">max</span><span class="p">()][</span><span class="s">'wifi_count'</span><span class="p">]</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>478    35.0
Name: wifi_count, dtype: float64
</code></pre></div></div> <p>Looks like there’s 35 free wifi locations in this bright yellow tract, maybe the ‘landmarks’ column will tell us why…</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wfw</span><span class="p">[</span><span class="s">'landmark'</span><span class="p">].</span><span class="n">value_counts</span><span class="p">().</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="n">sort_values</span><span class="p">().</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">'barh'</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Number of WiFi Locations by Landmark'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Number of WiFi Locations'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Landmark'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_34_0.png" alt="png" /></p> <p>So it could be the City Hall, let’s graph it!</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_hall_wifi</span> <span class="o">=</span> <span class="n">wfw</span><span class="p">[</span><span class="n">wfw</span><span class="p">[</span><span class="s">'landmark'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'City Hall'</span><span class="p">]</span>

<span class="k">if</span> <span class="n">census</span><span class="p">.</span><span class="n">crs</span> <span class="o">!=</span> <span class="n">city_hall_wifi</span><span class="p">.</span><span class="n">crs</span><span class="p">:</span>
    <span class="n">city_hall_wifi</span> <span class="o">=</span> <span class="n">city_hall_wifi</span><span class="p">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">census</span><span class="p">.</span><span class="n">crs</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'grey'</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s">'black'</span><span class="p">)</span>
<span class="n">city_hall_wifi</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'WiFi Locations at City Hall'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_36_0.png" alt="png" /></p> <p>Looks like we’re right! After plotting the subset of our dataframe where Landmark == “City Hall”, we can see that all of these points are clustered in that bright yellow census tract. Looking at the listed address of these WiFi locations, we can see that they are all located at 1 City Hall Square, which is the address of Boston City Hall.</p> <p>Here are the unique device addresses of these city hall wifi locations:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city_hall_wifi</span><span class="p">[</span><span class="s">'device_add'</span><span class="p">].</span><span class="n">unique</span><span class="p">()</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['1 City Hall Square, Boston, MA 02201',
       '1 City Hall Plaza, Pavilion\nBoston, MA  02201',
       'One City Hall Sq, Pavilion Bldg\nBoston, MA 02201', nan,
       '1 City Hall Plaza, \nBoston, MA  02201',
       'One City Hall Sq, Pavilion Bld, IWF Room,\nBoston, MA 02201'],
      dtype=object)
</code></pre></div></div> <h2 id="inside-vs-outside-wifi-locations"> <a href="#inside-vs-outside-wifi-locations" class="anchor-heading" aria-labelledby="inside-vs-outside-wifi-locations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inside vs Outside Wifi locations </h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">)</span>

<span class="c1"># Plot the wifi locations with color based on "inside_out" column
</span><span class="n">wfw</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s">'inside_out'</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">'cool'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Boston Census Block Groups and Wifi Locations"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_40_0.png" alt="png" /></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wfw</span><span class="p">[</span><span class="s">'inside_out'</span><span class="p">].</span><span class="n">value_counts</span><span class="p">().</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">'barh'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_41_0.png" alt="png" /></p> <p>Looks like most of our WiFi locations are outside. There’s probably a lot of “regular” EDA that can be done here, but since this is a GeoPandas/geographical analysis notebook, we’ll just leave it at that.</p> <h2 id="closest-wifi-location-to-bu"> <a href="#closest-wifi-location-to-bu" class="anchor-heading" aria-labelledby="closest-wifi-location-to-bu"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Closest Wifi location to BU </h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">geopy.distance</span> <span class="kn">import</span> <span class="n">geodesic</span>

<span class="c1"># Coordinates of Boston University (accordign to Google)
</span><span class="n">BU_latitude</span> <span class="o">=</span> <span class="mf">42.3505</span>
<span class="n">BU_longitude</span> <span class="o">=</span> <span class="o">-</span><span class="mf">71.1054</span>

<span class="c1"># Create a copy of the WiFi locations and drop rows with missing coordinates
</span><span class="n">wfw</span> <span class="o">=</span> <span class="n">wfw</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">wfw</span><span class="p">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'device_lat'</span><span class="p">,</span> <span class="s">'device_lon'</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="c1"># Function to calculate distances to BU
</span><span class="k">def</span> <span class="nf">calculate_distance</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">'device_lat'</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s">'device_lon'</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">geodesic</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="p">(</span><span class="n">BU_latitude</span><span class="p">,</span> <span class="n">BU_longitude</span><span class="p">)).</span><span class="n">miles</span>

<span class="n">wfw</span><span class="p">[</span><span class="s">'distance_to_BU'</span><span class="p">]</span> <span class="o">=</span> <span class="n">wfw</span><span class="p">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">calculate_distance</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Find the WiFi location with the minimum distance
</span><span class="n">wfw</span><span class="p">[</span><span class="n">wfw</span><span class="p">[</span><span class="s">'distance_to_BU'</span><span class="p">]</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">wfw</span><span class="p">[</span><span class="s">'distance_to_BU'</span><span class="p">])]</span>

</code></pre></div></div> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <div class="table-wrapper"><table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>neighborho</th> <th>neighbor_1</th> <th>device_ser</th> <th>device_con</th> <th>device_add</th> <th>device_lat</th> <th>device_lon</th> <th>device_tag</th> <th>etl_update</th> <th>is_current</th> <th>inside_out</th> <th>landmark</th> <th>ObjectId</th> <th>geometry</th> <th>distance_to_BU</th> </tr> </thead> <tbody> <tr> <th>36</th> <td>N_601230550253961587</td> <td>BCYF Tremont</td> <td>Q2FD-4SE4-JW2S</td> <td>BCYF-3rd FL GED</td> <td>1483 Tremont St, Boston, MA</td> <td>42.332317</td> <td>-71.09865</td> <td>BCYF Inside employee</td> <td>2023-06-12</td> <td>1</td> <td>Inside</td> <td>employee</td> <td>37</td> <td>POINT (-7914665.525 5210889.576)</td> <td>1.301774</td> </tr> </tbody> </table></div> </div> <p>In order to find the closest wifi location to BU, we need to find the distance between each wifi location and BU. We can do this using the geodesic function from geopy, which returns the distance between two longitudes/latitudes. Then, we can find the row where the distance is the smallest, which will be the closest wifi location to BU.</p> <p>The closest wifi location to BU is the one at 1483 Tremont St, Boston, MA. It’s about 1.3 miles away from BU. Let’s plot it!</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Plot the census data
</span><span class="n">census</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">)</span>

<span class="c1"># Plot the wifi locations
</span><span class="n">wfw</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># Plot the WiFi location closest to BU in red
</span><span class="n">wfw</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="s">"device_ser == 'Q2FD-4SE4-JW2S'"</span><span class="p">).</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"1483 Tremont Street and other Wifi Locations"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div> <p><img src="/documentation/project-guides/geo_eda_pngs/output_46_0.png" alt="png" /></p> <h2 id="wrap-up-next-steps"> <a href="#wrap-up-next-steps" class="anchor-heading" aria-labelledby="wrap-up-next-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Wrap Up, Next Steps </h2> <p>There’s a lot more you can do with these datasets, for example, you could try finding the average distance between wifi locations, or incorporate another dataset with demographic information and try to find a relationship between income, education level, population density, etc and wifi locations. but this notebook should serve as a good starting point for your geographical analysis.</p> <p>Click <a href="https://github.com/BU-Spark/ds-resources/tree/main">here</a> to download this Jupyter Notebook and data (make sure you are signed in with your BU email)!</p> <hr> <footer> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
